def {{ name }}(
{{ paramsField }}
):

    params = {}
{% for p in optionalParams %}
    if {{ p[1] }} != None:
        params[{{ "'" + p[0] + "'" }}] = {{p[1]}}
{% endfor %}
    try:
        r = requests.get({{ url }}, params=params)
        r.raise_for_status()

    except:
        raise ValueError("Request failed")

    data = r.json()["items"]

    return data